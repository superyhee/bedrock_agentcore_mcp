# 🚗 智能座舱对话场景指南

本文档专门介绍为汽车智能座舱优化的对话场景，涵盖驾驶过程中的各种实际需求。

## 概述

智能座舱场景设计原则：

- ✅ **安全第一** - 简化交互，减少驾驶分心
- ✅ **语音优先** - 适合语音交互的对话流程
- ✅ **实时响应** - 快速反馈，流式输出
- ✅ **上下文理解** - 理解"那里"、"这条路"等指代
- ✅ **场景化** - 针对驾驶场景的专属功能

## 场景优先级

### P0 级场景（核心功能）

#### 1. 🚗 智能导航

**使用频率**: ⭐⭐⭐⭐⭐  
**重要程度**: 核心功能

```
用户: 导航到国贸CBD
Agent: [开始导航]

用户: 前方路况怎么样？
Agent: [实时路况分析]

用户: 有没有更快的路线避开拥堵？
Agent: [智能重新规划]

用户: 预计什么时候到达？
Agent: [ETA 计算]
```

**关键能力**:

- 实时路况感知
- 动态路线规划
- ETA 预测
- 语音交互

---

#### 2. 🚗 实时路况

**使用频率**: ⭐⭐⭐⭐⭐  
**重要程度**: 核心功能

```
用户: 查询一下前方路况
Agent: [路况分析]

用户: 有事故吗？
Agent: [事故信息]

用户: 拥堵严重吗？大概堵多久？
Agent: [拥堵预测]

用户: 推荐一条避开拥堵的路线
Agent: [智能避堵]
```

**关键能力**:

- 实时路况监控
- 事故预警
- 拥堵预测
- 智能避堵

---

### P1 级场景（高频刚需）

#### 3. 🚗 沿途服务

**使用频率**: ⭐⭐⭐⭐  
**重要程度**: 高频场景

```
用户: 我在去机场的路上，还有30分钟
Agent: [理解时间约束]

用户: 路上想吃点东西，推荐顺路的餐厅
Agent: [沿途POI搜索]

用户: 那家店有停车位吗？
Agent: [停车信息]

用户: 如果在那里吃饭，会不会耽误航班？
Agent: [时间计算]
```

**关键能力**:

- 沿途 POI 搜索
- 时间约束理解
- 停车信息查询
- 行程时间计算

**适用场景**:

- 长途驾驶找餐厅
- 途中加油/充电
- 应急服务查询

---

#### 4. 🚗 停车场景

**使用频率**: ⭐⭐⭐⭐⭐  
**重要程度**: 刚需场景

```
用户: 我要去三里屯太古里购物
Agent: [目的地确认]

用户: 那里有停车场吗？
Agent: [停车场信息]

用户: 停车费怎么收？
Agent: [收费标准]

用户: 现在有空位吗？
Agent: [实时车位]

用户: 导航到停车场入口
Agent: [精准导航]
```

**关键能力**:

- 停车场查询
- 收费信息
- 实时车位
- 入口导航

**痛点解决**:

- 找不到停车场
- 不知道收费标准
- 停车场已满
- 找不到入口

---

#### 5. 🚗 充电/加油

**使用频率**: ⭐⭐⭐⭐  
**重要程度**: 刚需场景

```
用户: 油快没了，帮我找最近的加油站
Agent: [附近加油站]

用户: 哪家油价便宜？
Agent: [价格对比]

用户: 导航到那个加油站
Agent: [开始导航]

用户: 如果是电动车，附近有充电桩吗？
Agent: [充电桩查询]

用户: 充电桩现在有空位吗？
Agent: [实时状态]
```

**关键能力**:

- 加油站/充电桩查询
- 价格对比
- 实时状态
- 快速导航

**电动车特殊需求**:

- 续航计算
- 充电时长预估
- 快充/慢充选择
- 充电桩兼容性

---

### P2 级场景（日常高频）

#### 6. 🚗 接送人

**使用频率**: ⭐⭐⭐⭐  
**适用场景**: 机场/车站接送

```
用户: 我要去首都机场T3航站楼接人
Agent: [目的地确认]

用户: 现在出发来得及吗？
Agent: [时间计算]

用户: 走哪条路最快？
Agent: [最优路线]

用户: 机场停车怎么收费？
Agent: [停车费用]

用户: 有免费等待时间吗？
Agent: [停车政策]
```

**关键能力**:

- 航站楼精准导航
- 时间预估
- 停车费用查询
- 等待区推荐

---

#### 7. 🚗 自驾游

**使用频率**: ⭐⭐⭐  
**适用场景**: 周末/假期

```
用户: 这个周末想自驾去郊区玩，推荐一下北京周边的景点
Agent: [景点推荐]

用户: 古北水镇怎么样？
Agent: [景点介绍]

用户: 从市区开车过去要多久？
Agent: [时间预估]

用户: 路上有服务区吗？
Agent: [服务区信息]

用户: 规划一个两天一夜的自驾路线
Agent: [行程规划]
```

**关键能力**:

- 景点推荐
- 路线规划
- 服务区信息
- 住宿推荐

---

#### 8. 🚗 多目的地

**使用频率**: ⭐⭐⭐  
**适用场景**: 复杂行程

```
用户: 我今天要去三个地方：先去公司，然后去客户那里开会，最后去接孩子放学
Agent: [多点理解]

用户: 帮我规划一个最优路线
Agent: [路线优化]

用户: 第一站到第二站要多久？
Agent: [分段时间]

用户: 下午3点必须到学校，来得及吗？
Agent: [时间验证]

用户: 如果来不及，调整一下顺序
Agent: [重新规划]
```

**关键能力**:

- 多点路线优化
- 时间约束处理
- 顺序调整
- 分段导航

---

#### 9. 🚗 语音控制

**使用频率**: ⭐⭐⭐⭐⭐  
**适用场景**: 驾驶中交互

```
用户: 打开导航
Agent: [启动导航]

用户: 我想去最近的星巴克
Agent: [搜索结果]

用户: 选第一个
Agent: [确认选择]

用户: 开始导航
Agent: [开始导航]

用户: 还有多久到？
Agent: [ETA]
```

**关键能力**:

- 自然语言理解
- 指代消解
- 快速响应
- 免唤醒词

---

### P3 级场景（辅助功能）

#### 10. 🚗 天气路况

**使用频率**: ⭐⭐⭐  
**适用场景**: 恶劣天气

```
用户: 查一下今天的天气
用户: 会下雨吗？
用户: 雨天开车要注意什么？
用户: 高速路况怎么样？
用户: 推荐一条更安全的路线
```

**关键能力**:

- 天气预报
- 安全提醒
- 路线调整
- 风险预警

---

#### 11. 🚗 车辆维护

**使用频率**: ⭐⭐  
**适用场景**: 保养维修

```
用户: 我的车该保养了，附近有4S店吗？
用户: 哪家评价好？
用户: 营业时间是什么？
用户: 需要预约吗？
用户: 保养大概需要多久？
```

**关键能力**:

- 4S 店查询
- 评价对比
- 预约信息
- 等待区推荐

---

#### 12. 🚗 新手司机

**使用频率**: ⭐⭐⭐  
**适用场景**: 新手辅助

```
用户: 我是新手，想去颐和园，帮我规划一条简单好走的路线
用户: 避开复杂路口和立交桥
用户: 这条路线有几个红绿灯？
用户: 有没有难走的地方？
用户: 能实时提醒我变道吗？
```

**关键能力**:

- 简单路线规划
- 复杂路段避让
- 实时提醒
- 新手友好

---

#### 13. 🚗 商务出行

**使用频率**: ⭐⭐⭐  
**适用场景**: 商务场景

```
用户: 我10点有个会议在国贸，现在在酒店
用户: 最快多久能到？
用户: 规划最快路线
用户: 会迟到吗？
用户: 如果打车呢？
```

**关键能力**:

- 时间优先
- 多方式对比
- 迟到预警
- 效率优化

---

#### 14. 🚗 家庭出游

**使用频率**: ⭐⭐  
**适用场景**: 家庭场景

```
用户: 带着老人和孩子去动物园，帮我规划一条舒适的路线
用户: 避开颠簸路段
用户: 路上有休息区吗？
用户: 那里有母婴室吗？
用户: 停车场离入口近吗？
```

**关键能力**:

- 舒适路线
- 设施查询
- 无障碍信息
- 家庭友好

---

#### 15. 🚗 夜间驾驶

**使用频率**: ⭐⭐  
**适用场景**: 夜间行车

```
用户: 晚上要开车回家，从CBD到通州
用户: 夜间这条路安全吗？
用户: 路灯照明好吗？
用户: 有没有更明亮的路线？
用户: 如果困了，附近有安全的休息区吗？
```

**关键能力**:

- 安全路线
- 照明信息
- 休息区推荐
- 疲劳提醒

---

## 使用方法

### 方法 1: 快速启动座舱模式

```bash
python clients/boto3_client.py
# 选择 "座舱模式" 选项
```

这将按优先级运行推荐的智能座舱场景。

### 方法 2: 单独测试某个场景

```bash
python clients/boto3_client.py
# 选择具体的场景编号（16-30）
```

### 方法 3: 自定义车载问题

```bash
python clients/boto3_client.py "导航到最近的加油站"
```

## 车载交互设计原则

### 1. 安全第一

```python
# ✅ 好的设计：简短明确
"导航到国贸"
"前方路况"
"最近的加油站"

# ❌ 避免：复杂冗长
"请帮我详细规划一条从现在的位置到国贸CBD的路线，要考虑实时路况..."
```

### 2. 语音优先

```python
# ✅ 适合语音
"那里" "这条路" "第一个" "开始导航"

# ✅ 支持打断
用户: "导航到..."
Agent: [开始响应]
用户: "等等，换一个"
Agent: [立即停止，等待新指令]
```

### 3. 上下文理解

```python
# 对话 1
用户: "导航到三里屯"
Agent: [开始导航]

# 对话 2（理解"那里"）
用户: "那里有停车场吗？"
Agent: [理解"那里"=三里屯]

# 对话 3（继续上下文）
用户: "停车费多少？"
Agent: [理解是在问三里屯的停车费]
```

### 4. 实时反馈

```python
# 流式输出示例
用户: "前方路况怎么样？"
Agent: "正在查询..." [立即反馈]
Agent: "前方3公里处..." [流式输出]
Agent: "建议您..." [持续输出]
```

### 5. 场景化响应

```python
# 根据场景调整响应
场景: 高速驾驶
响应: 简短、关键信息优先

场景: 停车等待
响应: 可以详细、提供更多选项

场景: 紧急情况
响应: 最快路线、最近设施
```

## 性能要求

### 响应时间（车载场景）

| 场景类型 | 首次响应 | 完整响应 | 要求 |
| -------- | -------- | -------- | ---- |
| 导航启动 | < 1s     | < 2s     | 严格 |
| 路况查询 | < 1s     | < 3s     | 严格 |
| POI 搜索 | < 1.5s   | < 3s     | 一般 |
| 路线规划 | < 2s     | < 5s     | 一般 |
| 信息查询 | < 1s     | < 4s     | 宽松 |

### 准确率要求

| 功能     | 准确率 | 说明     |
| -------- | ------ | -------- |
| 导航地址 | > 95%  | 核心功能 |
| 路况信息 | > 90%  | 实时数据 |
| POI 搜索 | > 90%  | 基础功能 |
| 指代理解 | > 85%  | 上下文   |
| 语音识别 | > 90%  | 车内环境 |

## 测试建议

### 1. 真实场景测试

```bash
# 模拟真实驾驶场景
SESSION_ID="driving_test_$(date +%s)"

# 场景：上班通勤
agentcore invoke '{"prompt": "导航到公司"}' --session-id $SESSION_ID
agentcore invoke '{"prompt": "前方路况"}' --session-id $SESSION_ID
agentcore invoke '{"prompt": "有更快的路吗"}' --session-id $SESSION_ID
```

### 2. 压力测试

```python
# 测试连续多轮对话
for i in range(20):
    invoke_agent(f"问题 {i}", session_id=same_session)
```

### 3. 边界测试

```python
# 测试模糊指代
"那里" "这个" "刚才那个地方"

# 测试复杂路线
"去A，路上经过B，最后到C"

# 测试时间约束
"10分钟内能到吗？"
```

## 优化建议

### 1. 缓存常用数据

```python
# 缓存用户常去地点
home = "北京市朝阳区xxx"
office = "北京市海淀区xxx"

# 快速导航
"回家" -> 直接导航到 home
"去公司" -> 直接导航到 office
```

### 2. 预测用户需求

```python
# 场景：早上8点
if time == "08:00" and weekday:
    # 预加载通勤路线
    preload_route(home, office)

# 场景：快没油了
if fuel_level < 10%:
    # 主动推荐加油站
    suggest_gas_station()
```

### 3. 离线能力

```python
# 关键功能支持离线
- 基础导航
- 常用POI
- 历史路线
- 收藏地点
```

## 安全提醒

### 驾驶中使用注意事项

1. ⚠️ **优先使用语音** - 避免手动操作
2. ⚠️ **简化交互** - 减少对话轮次
3. ⚠️ **视线管理** - 最小化屏幕查看时间
4. ⚠️ **紧急情况** - 优先处理驾驶安全
5. ⚠️ **疲劳驾驶** - 及时提醒休息

### 系统安全设计

```python
# 检测驾驶状态
if vehicle_speed > 20:  # 时速 > 20km/h
    # 限制复杂交互
    disable_complex_ui()
    # 强制语音模式
    force_voice_mode()
    # 简化响应
    use_brief_response()
```

## 下一步

- 查看 [CONVERSATION_SCENARIOS.md](./CONVERSATION_SCENARIOS.md) 了解所有场景
- 查看 [MEMORY_GUIDE.md](./MEMORY_GUIDE.md) 了解记忆功能
- 运行 `python clients/boto3_client.py` 开始测试

## 参考资料

- [百度地图车载导航 API](https://lbsyun.baidu.com/index.php?title=car)
- [智能座舱交互设计规范](https://www.example.com)
- [车载语音交互最佳实践](https://www.example.com)
